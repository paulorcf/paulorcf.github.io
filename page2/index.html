<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      software insane! &middot; A Jekyll theme
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          software insane!
        </a>
      </h1>
      <p class="lead">A brazen two-column <a href="http://jekyllrb.com" target="_blank">Jekyll</a> theme that pairs a prominent sidebar with uncomplicated content. Made by <a href="https://twitter.com/mdo" target="_blank">@mdo</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/poole/hyde/archive/v2.1.0.zip">Download</a>
      <a class="sidebar-nav-item" href="https://github.com/poole/hyde">GitHub project</a>
      <span class="sidebar-nav-item">Currently v2.1.0</span>
    </nav>

    <p>&copy; 2017. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/04/palestra-tdc-cloud-computing-libvirt-e-libguestfs-o-caminho-automacao-da-virtualizacao/">
        Palestra TDC &#8211; Cloud Computing &#8211; Libvirt e Libguestfs &#8211; O caminho automação da virtualização
      </a>
    </h1>

    <span class="post-date">24 Apr 2014</span>

    <p>Palestra aprovada.</p>

<p><strong>Libvirt e Libguestfs – O caminho automação da virtualização</strong></p>

<p>Paulo Roberto de Castro Filho</p>

<p>Introdução a virtualização com open-source.</p>

<p>Arquitetura KVM e XEN.</p>

<p>Como domar e automatizar tarefas com diversos Hypervisors.</p>

<p>Libvirt é um toolkit que interage com sistemas de virtualização como Xen e KVM entre outros.</p>

<p>Libguestfs é outro toolkit para acessar e modificar discos de máquinas virtuais.</p>

<p><a href="http://www.paulorcf.com/wp-content/uploads/2014/04/libvirt_tdc2014_floripa.png"><img src="http://www.paulorcf.com/wp-content/uploads/2014/04/libvirt_tdc2014_floripa-1024x640.png" alt="Palestra TDC 2014 - Floripa" width="584" height="365" class="aligncenter size-large wp-image-91" srcset="http://www.paulorcf.com/wp-content/uploads/2014/04/libvirt_tdc2014_floripa-1024x640.png 1024w, http://www.paulorcf.com/wp-content/uploads/2014/04/libvirt_tdc2014_floripa-300x187.png 300w, http://www.paulorcf.com/wp-content/uploads/2014/04/libvirt_tdc2014_floripa-500x312.png 500w, http://www.paulorcf.com/wp-content/uploads/2014/04/libvirt_tdc2014_floripa.png 1280w" sizes="(max-width: 584px) 100vw, 584px" /></a></p>

<p><a href="http://www.thedevelopersconference.com.br/tdc/2014/inscricoes" target="_blank">Participe!</a></p>

<p>Data e Local</p>

<p>Sexta-feira, 16 de Maio de 2014</p>

<p>8:30 às 18:30</p>

<p><a href="http://www.oceaniaparkhotel.com.br/centro-convencoes/" target="_blank">Oceania Convention Center</a></p>

<p>Rua do Marisco, 550 – 88058-090</p>

<table>
  <tbody>
    <tr>
      <td>Praia dos Ingleses</td>
      <td>Florianópolis – SC</td>
    </tr>
  </tbody>
</table>

<p><a href="http://www.thedevelopersconference.com.br/tdc/2014/data-e-local" target="_blank">Informações sobre Data e Local</a></p>

<p>Mais informações: <a href="http://www.thedevelopersconference.com.br/tdc/2014/florianopolis/trilha-cloud-computing">http://www.thedevelopersconference.com.br/tdc/2014/florianopolis/trilha-cloud-computing</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/04/kill-running-thread-jboss/">
        Killing running thread in JBoss
      </a>
    </h1>

    <span class="post-date">24 Apr 2014</span>

    <p>Quick how to, check update to more information. Worked with JBoss 6.1 EAP.</p>

<p>This not work with locked thread.</p>

<p>Checking process PID</p>

<pre class="lang:sh decode:true ">jps</pre>

<p>Output something like this:</p>

<p>12124 Jps</p>

<p>24541 jboss-modules.jar</p>

<p>Generate DUMP for JBoss Process</p>

<pre class="lang:sh decode:true ">jstack 24541 &gt;&gt; /tmp/dump_24042014_1754.txt  # 24541 is JBoss PID</pre>

<p>Checking the Thread name</p>

<pre class="lang:sh decode:true ">cat /tmp/dump_24042014_1754.txt | grep -i "http-/0.0.0.0:8080-9"</pre>

<p>Output something like this:</p>

<p>“http-/0.0.0.0:8080-9” daemon prio=10 tid=0x00007f2ea8094800 nid=0x6073 runnable [0x00007f2e9df10000]</p>

<p>Running JKillThread</p>

<pre class="lang:sh decode:true " title="running JKillThread">java -jar jkillthread-1.0-SNAPSHOT.jar 24541 "http-/0.0.0.0:8080-9"
# 24541 is JBoss PID
# Thread Name is "http-/0.0.0.0:8080-9"</pre>

<p>Checking in JBoss log (standalone running mode)</p>

<pre class="lang:sh decode:true " title="reading JBoss log">tail -50f /usr/java/jboss-eap-6.2/standalone/log/server.log</pre>

<p>Output something like:</p>

<pre class="lang:sh decode:true " title="output JBoss">24-04-2014 17:56:10,410 ERROR [stderr] (Attach Listener) Killing "http-/0.0.0.0:8080-9"</pre>

<p>References and Resources</p>

<p><a href="https://github.com/jglick/jkillthread">JKillThread</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/04/parsible/">
        Parsible &#8211; Transforme seu log em informação qualitativa
      </a>
    </h1>

    <span class="post-date">24 Apr 2014</span>

    <p>Precisava à partir do log do XEN – LIBXL obter informações sobre mudança de estados das máquinas virtuais.</p>

<p>Parsible é uma ferramenta que faz parser de log e ajuda a transformar em informação qualitativa. O ciclo de leitura do arquivo e stream de linha por linha fica a cargo do Parsible, sendo assim, desenvolvedor só precisa escrever uma função de parser.</p>

<p>O Parsible abre uma thread que fica lendo o arquivo de trás para frente (igual um tail -f), já está pronto para rotate de log e fica a cargo do desenvolvedor rodar apenas um parser ou carregar todos os parsers.</p>

<p>Fluxo básico (mais detalhes diagrama de sequência abaixo):</p>

<p>Arquivo atualizado -&gt; parse -&gt; processor -&gt; output.</p>

<p>Output pode chamar um serviço REST, mandar os dados para um Riemann ou Graphite.</p>

<p><strong>Diagramas:</strong></p>

<p><a href="http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Parsible_Class_Diagram.png"><img src="http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Parsible_Class_Diagram-1024x710.png" alt="Abstract_Parsible_Class_Diagram" width="584" height="404" class="aligncenter size-large wp-image-66" srcset="http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Parsible_Class_Diagram-1024x710.png 1024w, http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Parsible_Class_Diagram-300x208.png 300w, http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Parsible_Class_Diagram-500x347.png 500w, http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Parsible_Class_Diagram.png 1210w" sizes="(max-width: 584px) 100vw, 584px" /></a></p>

<p><a href="http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Flow_Parsible_Sequence_Diagram.png"><img src="http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Flow_Parsible_Sequence_Diagram-1024x530.png" alt="Abstract_Flow_Parsible_Sequence_Diagram" width="584" height="302" class="aligncenter size-large wp-image-65" srcset="http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Flow_Parsible_Sequence_Diagram-1024x530.png 1024w, http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Flow_Parsible_Sequence_Diagram-300x155.png 300w, http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Flow_Parsible_Sequence_Diagram-500x258.png 500w, http://www.paulorcf.com/wp-content/uploads/2014/04/Abstract_Flow_Parsible_Sequence_Diagram.png 1433w" sizes="(max-width: 584px) 100vw, 584px" /></a></p>

<p><strong>Exemplos:</strong></p>

<pre class="lang:python mark:5 decode:true " title="xen42.py - Parser">import re
import logging


def parse_xend42(line):
    """
    This parser try parser only details information about xend42 events.
        Example:
            [2014-03-25 13:17:02 2140] INFO (XendDomainInfo:2079) Domain has shutdown: name=CD976431-linux-centos-6-64b-base-sx-1819 id=5
            30 reason=poweroff.

            [2014-03-26 12:00:33 2140] INFO (XendDomainInfo:2079) Domain has shutdown: name=tempoexpress id=549 reason=reboot.

            [2014-03-26 12:05:16 2140] INFO (XendDomainInfo:2079) Domain has shutdown: name=tempoexpress id=550 reason=poweroff.

        They extract this information:
            @Parsed
            libname (XendDomainInfo:2079)
            loglevel INFO
            actionDetail reason=poweroff. : split("=") get only poweroff
            date [2014-03-25 : strip [

            time 13:17:02
            action shutdown:
            vmName name=CD976431-linux-centos-6-64b-base-sx-1819 : split("=") get only CD976431-linux-centos-6-64b-base-sx-1819
            id id=530 : split("=") get only 530

            @Ignored for now:
            domain Domain
            has has
            timeid 2140]
    """
    line = line.strip()

    # Shutdown
    regex = re.compile("(?P&lt;date&gt;[\w\S]+)\s(?P&lt;time&gt;[\w\S]+)\s(?P&lt;timeid&gt;[\w\S]+)\s(?P&lt;loglevel&gt;[\w\S]+)\s(?P&lt;libname&gt;[\w\S]+)\s(?P&lt;domain&gt;[\w\S]+)\s(?P&lt;has&gt;[\w\S]+)\s(?P&lt;action&gt;[\w\S]+)\s(?P&lt;vmName&gt;[\w\S]+)\s(?P&lt;id&gt;[\w\S]+)\s(?P&lt;actionDetail&gt;[\w\S]+)")
    r = regex.search(line)
    result_set = {}
    if r:
        try:
            result_set["libname"] = r.group("libname")
            logging.debug("Get libname=%s, OK!" % result_set["libname"])

            result_set["loglevel"] = r.group("loglevel")
            logging.debug("Get loglevel, OK!")

            lreport = r.group("actionDetail").split("=")
            result_set["actionDetail"] = lreport[1][:-1]  # strip .
            logging.debug("Get actionDetail=%s, OK!" % result_set["actionDetail"])

            result_set["date"] = r.group("date")[1:]  # strip first char [
            logging.debug("Get date=%s, OK!" % result_set["date"])

            result_set["time"] = r.group("time")
            logging.debug("Get time=%s, OK!" % result_set["time"])

            result_set["action"] = r.group("action")[:-1]  # strip .
            logging.debug("Get action=%s, OK!" % result_set["action"])

            lvmName = r.group("vmName").split("=")
            result_set["vmName"] = lvmName[1]
            logging.debug("Get vmName=%s, OK!" % result_set["vmName"])

            lID = r.group("id").split("=")
            result_set["id"] = lID[1]
            logging.debug("Get id=%s, OK!" % result_set["id"])

        except IndexError:
            logging.error("Unable parser information in libxl, some regex group missing")

    # CRASHED
    regex = re.compile("(?P&lt;date&gt;[\w\S]+)\s(?P&lt;time&gt;[\w\S]+)\s(?P&lt;timeid&gt;[\w\S]+)\s(?P&lt;loglevel&gt;[\w\S]+)\s(?P&lt;libname&gt;[\w\S]+)\s(?P&lt;domain&gt;[\w\S]+)\s(?P&lt;has&gt;[\w\S]+)\s(?P&lt;action&gt;[\w\S]+)\s(?P&lt;vmName&gt;[\w\S]+)\s(?P&lt;id&gt;[\w\S]+)")
    r = regex.search(line)
    result_set = {}
    if r:
        try:
            result_set["libname"] = r.group("libname")
            logging.debug("Get libname=%s, OK!" % result_set["libname"])

            result_set["loglevel"] = r.group("loglevel")
            logging.debug("Get loglevel, OK!")

            result_set["date"] = r.group("date")[1:]  # strip first char [
            logging.debug("Get date=%s, OK!" % result_set["date"])

            result_set["time"] = r.group("time")
            logging.debug("Get time=%s, OK!" % result_set["time"])

            result_set["action"] = r.group("action")[:-1]  # strip .
            logging.debug("Get action=%s, OK!" % result_set["action"])

            result_set["actionDetail"] = r.group("action")[:-1]  # strip .
            logging.debug("Get actionDetail=%s, OK!" % result_set["actionDetail"])

            lvmName = r.group("vmName").split("=")
            result_set["vmName"] = lvmName[1]
            logging.debug("Get vmName=%s, OK!" % result_set["vmName"])

            lID = r.group("id").split("=")
            result_set["id"] = lID[1]
            logging.debug("Get id=%s, OK!" % result_set["id"])

        except IndexError:
            logging.error("Unable parser information in libxl, some regex group missing")

    else:
        logging.debug("Not value found on regex")

    return result_set</pre>

<pre class="lang:python mark:5 decode:true " title="pxend42.py - Processor">import logging
from audit.plugins.outputs import output_libvirt_events


def process_action_shutdown(result):
    """

    """
    # TODO: Fix the if hierarchy and prop for action - Crashed and Shutdown repeated
    #if not result.viewkeys() &amp; {'libname', 'actionDetail', 'action', 'vmName'}:
    if all(k in result for k in ("libname", 'actionDetail', "action", "vmName")):
        if result['libname'] == "(XendDomainInfo:2079)":

            if result['action'] == "shutdown":
                logging.debug("Shutdown event to vmName=%s and detail=%s " % (result['vmName'], result['actionDetail']))
                output_libvirt_events.broadcast_shutdown(result['vmName'], result['actionDetail'])

            elif result['action'] == "crashed":
                logging.debug("Shutdown event to vmName=%s and detail=%s " % (result['vmName'], result['actionDetail']))
                output_libvirt_events.broadcast_shutdown(result['vmName'], result['actionDetail'])

        else:
            logging.error("Detected action not implemented %s" % result['action'])

    else:
        logging.error("Detected shutdown in processor but parse can't get details")</pre>

<pre class="lang:default mark:7 decode:true " title="output_libvirt_events.py - Outputs">import logging
from audit import VMProp
# import deleted from code
# import deleted from code

def broadcast_shutdown(vmName, actionDetail ):
    """
    Set the last detail information on global event_libvirt
        :event_libvirt = { vmName : lastStated }

    In Python documentation Dict is atomic. If you don't believe that try QUEUE.
    """
    tmp = {}
    if actionDetail == VMProp.vmState_SHUTTING_DOWN_DETAIL.lower():
        logging.debug("output called with action %s" + Utils.get_callee_name())
        API.set_vm_shutdown(vmName, VMProp.vmState_POWEROFF)

    elif actionDetail == VMProp.vmState_POWEROFF_CRASHED.lower():
        logging.debug("output called with action %s" + Utils.get_callee_name())
        API.set_vm_crashed(vmName)

    elif actionDetail == VMProp.vmState_POWEROFF_REBOOT.lower():
        logging.debug("output called with action %s" + Utils.get_callee_name())
        API.set_vm_shutdown(vmName, VMProp.vmState_POWEROFF_REBOOT)

    else:
        tmp[vmName] = None
        logging.error("Trying broadcast a new shutdown details but don't recognized actionDetail=%s " % actionDetail)</pre>

<p>References e resources:</p>

<p><a href="http://tech.yipit.com/2012/08/03/parsible-straightforward-log-parsing/" target="_blank">http://tech.yipit.com/2012/08/03/parsible-straightforward-log-parsing/</a></p>

<p><a href="http://github.com/Yipit/parsible">http://github.com/Yipit/parsible</a></p>

<p><a href="https://github.com/paulorcf/parsible" title="Parser e Processor para LibXL">https://github.com/paulorcf/parsible</a></p>

<p><a href="http://www.paulorcf.com/wp-content/uploads/2014/04/parsible_conceptual_diagram_jude_v1.tar.gz">parsible_conceptual_diagram_jude_v1.tar</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/04/fisl15-diybio-hackeando-o-software-da-vida/">
        FISL15 &#8211; DIYbio hackeando o software da vida
      </a>
    </h1>

    <span class="post-date">03 Apr 2014</span>

    <p>Confirmada para dia 10/05/2014, 16:00hrs no salão 41F (250 lugares).</p>

<p><a href="http://www.paulorcf.com/wp-content/uploads/2014/04/palestraNaGrade_V1.png"><img src="http://www.paulorcf.com/wp-content/uploads/2014/04/palestraNaGrade_V1-1024x569.png" alt="palestraNaGrade_V1" width="584" height="324" class="aligncenter size-large wp-image-70" srcset="http://www.paulorcf.com/wp-content/uploads/2014/04/palestraNaGrade_V1-1024x569.png 1024w, http://www.paulorcf.com/wp-content/uploads/2014/04/palestraNaGrade_V1-300x166.png 300w, http://www.paulorcf.com/wp-content/uploads/2014/04/palestraNaGrade_V1-500x278.png 500w, http://www.paulorcf.com/wp-content/uploads/2014/04/palestraNaGrade_V1.png 1165w" sizes="(max-width: 584px) 100vw, 584px" /></a></p>

<p>Quer hackear seu DNA ou sua própria vida ?</p>

<p>DIYbio é uma rede de indivíduos globais que querem hackear a biologia aplicando práticas de “Faça você mesmo”.</p>

<p>Objetivo da palestra é demonstrar as principais as iniciativas e ideias para modelagem de sistemas biológicos via computação. Ensinaremos como trabalhar com dados do seu próprio DNA.</p>

<p>Demonstração de projetos como Wholecell da Universidade Stanford.</p>

<p>Neste momento, em algum lugar dos Estados Unidos, da Inglaterra ou até da Índia, algum biólogo sintético amador está realizando um experimento na sua cozinha ou garagem. Nos últimos dois anos, entusiastas da biologia molecular têm se juntado para montar organizações de biologia sintética amadora, como o DIYbio (do-it-yourself biology), em que os membros se reúnem em pubs e barbecues para discutir os últimos experimentos realizados nas suas próprias garagens. Há quase seis meses tenho participado das discussões desse grupo, que apresentam conteúdo refinado e objetivo sobre o desenvolvimento de microscópios de 10 dólares, espectrofotômetros, centrífugas de furadeiras ou liquidificadores, construções de diferentes kits com E. coli modificada, chegando até a sequenciadores de DNA caseiros.</p>

<p>Fonte: <a href="http://synbiobrasil.org/2011/02/15/do-it-yourself-biologists-dyibio-e-a-ciencia-cidada/" target="_blank">http://synbiobrasil.org/2011/02/15/do-it-yourself-biologists-dyibio-e-a-ciencia-cidada/</a></p>

<p><strong>Tópicos:</strong></p>

<p>DIYbio foi fundado em 2008 no EUA com missão de criar uma comunidade de biologos com intuito de “Faça você mesmo”. A principal missão é acreditar que biotecnologia e mostrar para o grande público o grande potencial de benefícios (http://diybio.org/).</p>

<p>Comentários sobre o livro BioPunk: DIY Scientists hack the software of life.</p>

<p>Opensource para processamento de DNA.</p>

<p>Simulando uma célula com projeto Wholecell.</p>

<p>Entender uma cultura de bacterias e como simula-la no computador.</p>

<p>Processamento do GENOMA por U$ 1.000,00.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/04/install-virt-v2v-debian/">
        Install virt-v2v on Debian from source
      </a>
    </h1>

    <span class="post-date">02 Apr 2014</span>

    <p>Howto install virt-v2v from source code on Debian or Ubuntu.</p>

<pre class="theme:inlellij-idea lang:sh decode:true ">git clone https://git.fedorahosted.org/git/virt-v2v.git

sudo apt-get install dh-autoreconf

sudo apt-get install libguestfs-tools

sudo apt-get install libxml-dom-perl libxml-xpath-perl libxml-dom-xpath-perl \ 
libterm-progressbar-perl libdatetime-perl libnet-server-perl \ 
libnet-https-any-perl libnet-https-nb-perl libnet-httpserver-perl \
libcrypt-ssleay-perl

wget http://launchpadlibrarian.net/85191944/libdigest-sha1-perl_2.13-2build2_amd64.deb

sudo dpkg -i libdigest-sha1-perl_2.13-2build2_amd64.deb

./run v2v/virt-v2v.pl</pre>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page3">Older</a>
  
  
    
      <a class="pagination-item newer" href="/">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
